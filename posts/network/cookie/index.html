<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>[HTTP 일반헤더] 쿠키 | 5hdumat</title>
<meta name=keywords content="Network,Http,Cookie">
<meta name=description content="쿠키는 왜 생긴걸까? 쿠키를 사용할 땐 2가지 헤더를 사용한다.
 Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답) Cookie: 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달  위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.
쿠키 미사용 예시  웹 브라우저에서 클라이언트가 /welcome으로 접근을 한다.
 클라이언트가 로그인을 요청하고 서버는 응답한다.
다시 /welcome으로 접근한다.
  위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 홍길동이 아닌 손님으로 응답한다.">
<meta name=author content="서민규">
<link rel=canonical href=https://5hdumat.github.io/posts/network/cookie/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as=style>
<link rel=preload href=/resources/images/profile/giphy.gif as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://5hdumat.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://5hdumat.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://5hdumat.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://5hdumat.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://5hdumat.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.87.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-05YE8R0TGZ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-05YE8R0TGZ',{anonymize_ip:!1})}</script>
<meta property="og:title" content="[HTTP 일반헤더] 쿠키">
<meta property="og:description" content="쿠키는 왜 생긴걸까? 쿠키를 사용할 땐 2가지 헤더를 사용한다.
 Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답) Cookie: 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달  위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.
쿠키 미사용 예시  웹 브라우저에서 클라이언트가 /welcome으로 접근을 한다.
 클라이언트가 로그인을 요청하고 서버는 응답한다.
다시 /welcome으로 접근한다.
  위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 홍길동이 아닌 손님으로 응답한다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://5hdumat.github.io/posts/network/cookie/">
<meta property="og:image" content="https://5hdumat.github.io/resources/images/network/http.jpeg"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-26T01:46:45+09:00">
<meta property="article:modified_time" content="2021-08-26T01:46:45+09:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://5hdumat.github.io/resources/images/network/http.jpeg">
<meta name=twitter:title content="[HTTP 일반헤더] 쿠키">
<meta name=twitter:description content="쿠키는 왜 생긴걸까? 쿠키를 사용할 땐 2가지 헤더를 사용한다.
 Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답) Cookie: 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달  위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.
쿠키 미사용 예시  웹 브라우저에서 클라이언트가 /welcome으로 접근을 한다.
 클라이언트가 로그인을 요청하고 서버는 응답한다.
다시 /welcome으로 접근한다.
  위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 홍길동이 아닌 손님으로 응답한다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://5hdumat.github.io/posts/"},{"@type":"ListItem","position":3,"name":"[HTTP 일반헤더] 쿠키","item":"https://5hdumat.github.io/posts/network/cookie/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[HTTP 일반헤더] 쿠키","name":"[HTTP 일반헤더] 쿠키","description":"쿠키는 왜 생긴걸까? 쿠키를 사용할 땐 2가지 헤더를 사용한다.\n Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답) Cookie: 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달  위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.\n쿠키 미사용 예시  웹 브라우저에서 클라이언트가 /welcome으로 접근을 한다.\n 클라이언트가 로그인을 요청하고 서버는 응답한다.\n다시 /welcome으로 접근한다.\n  위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 홍길동이 아닌 손님으로 응답한다.","keywords":["Network","Http","Cookie"],"articleBody":"쿠키는 왜 생긴걸까? 쿠키를 사용할 땐 2가지 헤더를 사용한다.\n Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답) Cookie: 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달  위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.\n쿠키 미사용 예시  웹 브라우저에서 클라이언트가 /welcome으로 접근을 한다.\n 클라이언트가 로그인을 요청하고 서버는 응답한다.\n다시 /welcome으로 접근한다.\n  위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 홍길동이 아닌 손님으로 응답한다. 서버 입장에선 요청한 클라이언트의 로그인 여부를 구분할 수 있는 방법이 없기 때문이다.\n💡 이전 포스트에 정리해두었던 HTTP의 특징을 잘 생각해보자.\nStateLess!  HTTP는 무상태(StateLess) 프로토콜이다. 클라이언트와 서버가 요청과 응답을 주고 받으면 연결이 끊어진다.  지속 연결로 인해 어느정도 연결을 지속하기는 하지만 클라이언트가 다시 요청하면 서버는 이전 요청을 기억하지 못한다.   클라이언트와 서버는 서로 상태를 유지하지 않는다.  HTTP 특징 중 하나가 클라이언트와 서버가 서로 상태를 유지하지 않는 무상태성이기 때문에 재 요청 시 클라이언트와 서버가 주고받았던 맥락이 유지되지 않는다. 즉, 클라이언트가 로그인을 요청했다 하더라도 /welcome 재접근 시 서버는 로그인한 사용자라는 걸 구분하지 못한다.\n대안 모든 요청에 사용자 정보를 포함하면 대안이 가능하다. 하지만 문제점이 있다.\n문제점은 아래와 같다.\n 모든 요청에 사용자 정보를 포함해야하다보니 유지보수성, 보안등에 문제가 있다. 브라우저를 완전히 종료하고 다시 열면 문제가 다시 원점이 된다.  웹 스토리지를 이용하면 이 문제도 해결가능하지만 굳이?    이러한 문제점으로 인해 우리의 개발 선구자분들께서 쿠키라는 개념을 도입하게 된다.\n 쿠키 사용 예시   클라이언트가 서버에 로그인 요청을 보낸다.\n이후 서버는 Set-Cookie 헤더에 유저 정보를 담아 응답하고, 브라우저는 서버 응답에 포함된 Set-Cookie 헤더 값을 쿠키 저장소에 저장한다.\n  로그인 이후 클라이언트가 /welcome에 접속하려고 하면 웹 브라우저는 자동으로 쿠키 저장소를 조회한 후 Cookie 헤더에 유저 정보를 포함시켜 서버에 요청한다.\n  서버는 쿠키 데이터로 홍길동 유저라는 걸 구분할 수 있게된다. 쿠키 사용 시 주의사항 쿠키 저장소에서 조회만 된다면 브라우저는 Cookie 헤더에 유저 정보를 요청에 자동으로 포함시켜 요청한다.\n모든 곳에 쿠키 값을 보내게 되면 보안 등의 문제 소지가 있어 제약조건을 걸어줘야 한다.\n 제약 조건을 알아보기 전에 쿠키에 대해서 간단히 정리만 해놓자.\n쿠키 쿠키 사용예시  set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; path=/; domain=.google.com; Secure  쿠키는 보통 어디에서 쓰이는가?  보통 사용자 로그인 세션 관리할 때 사용하다. 광고 정보를 트래킹할때도 쿠키 정보를 사용한다.  특정 웹 브라우저를 사용하는 유저가 어떤 광고를 보는지 등을 알아낼 수 있다.    쿠키를 사용할 때 주의해야 할 점  쿠키 정보는 항상 서버에 전송되므로 네트워크 트래픽을 추가로 유발한다.  최소한의 정보(세션 id, 인증 토큰 정도)만 사용하는게 좋다.   쿠키 데이터는 보안에 민감한 데이터는 절대 절대 저장하면 안된다.  쿠키를 요청할때마다 전송하기 싫다면?  서버에 전송하지 않고, 클라이언트에 데이터를 저장하고 싶으면 웹 스토리지 (localStorage, sessionStorage)에 대해서 추가적으로 찾아볼 것  쿠키 제약조건 생명주기  Expries, max-age\n쿠키를 무기한 보관할 수는 없다. Set-Cookie에 만료일을 지정할 수 있다.\n  set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; path=/; domain=.google.com; Secure  만료일(만료일 데이터는 항상 그리니치 평균시인 GMT 기준으로 기입)이 되면 쿠키가 삭제된다.   Set-Cookie: max-age=3600 (3600초)  0이나 음수를 지정하면 쿠키 삭제   세션 쿠키(Session Cookie): 만료 날짜를 생략하면 브라우저 종료시 까지만 유지한다. 이를 세션 쿠키 라고 한다. 영속 쿠키(Persistence Cookie): 만료 날짜를 입력하면 해당 날짜까지 유지한다. 이를 영속 쿠키 라고 한다.  도메인  Domain\n쿠키는 도메인을 명시할 수 있다. 도메인이 설정된 쿠키는 해당 도메인에서만 유효한 쿠키가 된다.\n  set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; path=/; domain=.google.com; Secure 사용 방법으로는 2가지가 있다.  명시하는 방법  domain=google.com를 지정해서 쿠키 생성  google.com, dev.google.com 둘 다 쿠키 접근 가능     생략하는 방법  google.com에서 쿠키를 생성하고 하위 도메인에서는 생략  google.com 에서만 쿠키 접근 가능하고 dev.google.com 에서는 쿠키 접근이 불가능하다.        경로  Path\n위에 정리해 둔 도메인외에 리소스 경로로도 필터링이 가능하다.\n  set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; path=/; domain=.google.com; Secure 보통 path=/ 루트경로로 지정한다. 일반적으로 서버개발자들은 한 도메인안에서 쿠키를 모두 전송하길 원한다. path=/home 경로를 지정하게 되면 해당 경로를 포함한 하위 경로 페이지만 쿠키 접근이 가능하다.  path=/home 지정  /home - 가능 /home/level1 - 가능 /home/level1/level2 - 가능 /hello - 불가능      보안  Secure, HttpOnly, SameSite\n  Secure  쿠키는 http, https를 구분하지 않고 전송하는데 Secure를 적용하면 https인 경우에만 전송한다.   HttpOnly  XSS(Cross-Site Scripting) 공격 방지  XSS(Cross-Site Scripting)는 웹 애플리케이션에서 일어나는 취약점으로 관리자가 아닌 권한이 없는 사용자가 웹 사이트에 스크립트를 삽입하는 공격을 방지   HttpOnly를 적용하게되면 자바스크립트에서 쿠키를 접근할 수 없고 HTTP 전송에서만 사용 가능하다.   SameSite 관련정보  CSRF(교차 사이트 요청 위조) 공격을 방지하기 위해 HTTP 쿠키에서 설정할 수 있는 속성이다. 클라이언트의 요청 도메인과 쿠키에 설정된 도메인이 같은 경우에만 쿠키를 전송한다.    ","wordCount":"658","inLanguage":"en","image":"https://5hdumat.github.io/resources/images/network/http.jpeg","datePublished":"2021-08-26T01:46:45+09:00","dateModified":"2021-08-26T01:46:45+09:00","author":{"@type":"Person","name":"서민규"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://5hdumat.github.io/posts/network/cookie/"},"publisher":{"@type":"Organization","name":"5hdumat","logo":{"@type":"ImageObject","url":"https://5hdumat.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://5hdumat.github.io accesskey=h title="5hdumat (Alt + H)">5hdumat</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=https://5hdumat.github.io/archives/ title=Archives>
<span>Archives</span>
</a>
</li>
<li>
<a href=https://5hdumat.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://5hdumat.github.io/posts/ title=Posts>
<span>Posts</span>
</a>
</li>
<li>
<a href=https://5hdumat.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://5hdumat.github.io>Home</a>&nbsp;»&nbsp;<a href=https://5hdumat.github.io/posts/>Posts</a></div>
<h1 class=post-title>
[HTTP 일반헤더] 쿠키
</h1>
<div class=post-meta>August 26, 2021&nbsp;·&nbsp;서민규&nbsp;|&nbsp;<a href=https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard rel="noopener noreferrer" target=_blank>모든 개발자를 위한 HTTP 웹 기본 지식</a>
</div>
</header>
<figure class=entry-cover><img loading=lazy src=https://5hdumat.github.io/resources/images/network/http.jpeg alt>
</figure>
<div class=post-content><h1 id=쿠키는-왜-생긴걸까>쿠키는 왜 생긴걸까?<a hidden class=anchor aria-hidden=true href=#쿠키는-왜-생긴걸까>#</a></h1>
<p>쿠키를 사용할 땐 2가지 헤더를 사용한다.</p>
<ul>
<li><strong>Set-Cookie:</strong> 서버에서 클라이언트로 쿠키 전달 (응답)</li>
<li><strong>Cookie:</strong> 클라이언트가 서버로 부터 받은 쿠키를 저장하고, HTTP 요청 시 서버로 전달</li>
</ul>
<p>위 두 가지 헤더가 왜 필요할까? 쿠키를 미사용 했을 때 예시를 들어보자.</p>
<h2 id=쿠키-미사용-예시>쿠키 미사용 예시<a hidden class=anchor aria-hidden=true href=#쿠키-미사용-예시>#</a></h2>
<ol>
<li><strong>웹 브라우저에서 클라이언트가 <code>/welcome</code>으로 접근을 한다.</strong><br>
<img loading=lazy src=/resources/images/network/internet-network-92.png alt=internet-network-92>
</li>
<li><strong>클라이언트가 로그인을 요청하고 서버는 응답한다.</strong><br>
<img loading=lazy src=/resources/images/network/internet-network-93.png alt=internet-network-93>
<br>
<strong>다시 <code>/welcome</code>으로 접근한다.</strong><br>
<img loading=lazy src=/resources/images/network/internet-network-94.png alt=internet-network-94>
</li>
</ol>
<p>위 예제에서 분명 로그인을 했음에도 다시 웰컴 페이지로 접근했을 때 서버는 <strong>홍길동</strong>이 아닌 <strong>손님</strong>으로 응답한다. 서버 입장에선 요청한 클라이언트의 로그인 여부를 구분할 수 있는 방법이 없기 때문이다.</p>
<p><strong>💡 <a href=/posts/network/http/>이전 포스트</a>에 정리해두었던 HTTP의 특징을 잘 생각해보자.</strong></p>
<h3 id=stateless>StateLess!<a hidden class=anchor aria-hidden=true href=#stateless>#</a></h3>
<ul>
<li>HTTP는 무상태(StateLess) 프로토콜이다.</li>
<li>클라이언트와 서버가 요청과 응답을 주고 받으면 연결이 끊어진다.
<ul>
<li>지속 연결로 인해 어느정도 연결을 지속하기는 하지만 클라이언트가 다시 요청하면 서버는 이전 요청을 기억하지 못한다.</li>
</ul>
</li>
<li>클라이언트와 서버는 서로 상태를 유지하지 않는다.</li>
</ul>
<p>HTTP 특징 중 하나가 클라이언트와 서버가 서로 상태를 유지하지 않는 무상태성이기 때문에 재 요청 시 클라이언트와 서버가 주고받았던 맥락이 유지되지 않는다. 즉, 클라이언트가 로그인을 요청했다 하더라도 <code>/welcome</code> 재접근 시 서버는 로그인한 사용자라는 걸 구분하지 못한다.</p>
<h3 id=대안>대안<a hidden class=anchor aria-hidden=true href=#대안>#</a></h3>
<p><strong>모든 요청에 사용자 정보를 포함하면 대안이 가능하다. 하지만 문제점이 있다.</strong><br>
<img loading=lazy src=/resources/images/network/internet-network-95.png alt=internet-network-95>
</p>
<p>문제점은 아래와 같다.</p>
<ul>
<li>모든 요청에 사용자 정보를 포함해야하다보니 유지보수성, 보안등에 문제가 있다.</li>
<li>브라우저를 완전히 종료하고 다시 열면 문제가 다시 원점이 된다.
<ul>
<li>웹 스토리지를 이용하면 이 문제도 해결가능하지만 굳이?</li>
</ul>
</li>
</ul>
<p><strong>이러한 문제점으로 인해 우리의 개발 선구자분들께서 쿠키라는 개념을 도입하게 된다.</strong></p>
<hr>
<h2 id=쿠키-사용-예시>쿠키 사용 예시<a hidden class=anchor aria-hidden=true href=#쿠키-사용-예시>#</a></h2>
<ol>
<li>
<p><strong>클라이언트가 서버에 로그인 요청을 보낸다.</strong><br>
<strong>이후 서버는 <code>Set-Cookie</code> 헤더에 유저 정보를 담아 응답하고, 브라우저는 서버 응답에 포함된 <code>Set-Cookie</code> 헤더 값을 쿠키 저장소에 저장한다.</strong><br>
<img loading=lazy src=/resources/images/network/internet-network-96.png alt=internet-network-9>
</p>
</li>
<li>
<p><strong>로그인 이후 클라이언트가 <code>/welcome</code>에 접속하려고 하면 웹 브라우저는 자동으로 쿠키 저장소를 조회한 후 <code>Cookie</code> 헤더에 유저 정보를 포함시켜 서버에 요청한다.</strong></p>
</li>
</ol>
<h5 id=서버는-쿠키-데이터로-홍길동-유저라는-걸-구분할-수-있게된다>서버는 쿠키 데이터로 홍길동 유저라는 걸 구분할 수 있게된다.<a hidden class=anchor aria-hidden=true href=#서버는-쿠키-데이터로-홍길동-유저라는-걸-구분할-수-있게된다>#</a></h5>
<p><img loading=lazy src=/resources/images/network/internet-network-97.png alt=internet-network-97>
</p>
<h3 id=쿠키-사용-시-주의사항>쿠키 사용 시 주의사항<a hidden class=anchor aria-hidden=true href=#쿠키-사용-시-주의사항>#</a></h3>
<p>쿠키 저장소에서 조회만 된다면 브라우저는 Cookie 헤더에 유저 정보를 요청에 자동으로 포함시켜 요청한다.<br>
<img loading=lazy src=/resources/images/network/internet-network-98.png alt=internet-network-98>
</p>
<p>모든 곳에 쿠키 값을 보내게 되면 보안 등의 문제 소지가 있어 <strong>제약조건</strong>을 걸어줘야 한다.</p>
<hr>
<p>제약 조건을 알아보기 전에 쿠키에 대해서 간단히 정리만 해놓자.</p>
<h2 id=쿠키>쿠키<a hidden class=anchor aria-hidden=true href=#쿠키>#</a></h2>
<h3 id=쿠키-사용예시>쿠키 사용예시<a hidden class=anchor aria-hidden=true href=#쿠키-사용예시>#</a></h3>
<ul>
<li>set-cookie: <strong>sessionId</strong>=abcde1234; <strong>expires</strong>=Sat, 26-Dec-2020 00:00:00 GMT; <strong>path</strong>=/; <strong>domain</strong>=.google.com; <strong>Secure</strong></li>
</ul>
<h3 id=쿠키는-보통-어디에서-쓰이는가>쿠키는 보통 어디에서 쓰이는가?<a hidden class=anchor aria-hidden=true href=#쿠키는-보통-어디에서-쓰이는가>#</a></h3>
<ul>
<li>보통 사용자 로그인 세션 관리할 때 사용하다.</li>
<li>광고 정보를 트래킹할때도 쿠키 정보를 사용한다.
<ul>
<li>특정 웹 브라우저를 사용하는 유저가 어떤 광고를 보는지 등을 알아낼 수 있다.</li>
</ul>
</li>
</ul>
<h3 id=쿠키를-사용할-때-주의해야-할-점>쿠키를 사용할 때 주의해야 할 점<a hidden class=anchor aria-hidden=true href=#쿠키를-사용할-때-주의해야-할-점>#</a></h3>
<ul>
<li>쿠키 정보는 항상 서버에 전송되므로 네트워크 트래픽을 추가로 유발한다.
<ul>
<li>최소한의 정보(세션 id, 인증 토큰 정도)만 사용하는게 좋다.</li>
</ul>
</li>
<li>쿠키 데이터는 보안에 민감한 데이터는 절대 절대 저장하면 안된다.</li>
</ul>
<h3 id=쿠키를-요청할때마다-전송하기-싫다면>쿠키를 요청할때마다 전송하기 싫다면?<a hidden class=anchor aria-hidden=true href=#쿠키를-요청할때마다-전송하기-싫다면>#</a></h3>
<ul>
<li>서버에 전송하지 않고, 클라이언트에 데이터를 저장하고 싶으면 웹 스토리지 (localStorage, sessionStorage)에 대해서 추가적으로 찾아볼 것</li>
</ul>
<h2 id=쿠키-제약조건>쿠키 제약조건<a hidden class=anchor aria-hidden=true href=#쿠키-제약조건>#</a></h2>
<h3 id=생명주기>생명주기<a hidden class=anchor aria-hidden=true href=#생명주기>#</a></h3>
<blockquote>
<p><strong>Expries, max-age</strong><br>
쿠키를 무기한 보관할 수는 없다. Set-Cookie에 만료일을 지정할 수 있다.</p>
</blockquote>
<ul>
<li>set-cookie: sessionId=abcde1234; <strong>expires</strong>=Sat, 26-Dec-2020 00:00:00 GMT; path=/; domain=.google.com; Secure
<ul>
<li>만료일(만료일 데이터는 항상 그리니치 평균시인 GMT 기준으로 기입)이 되면 쿠키가 삭제된다.</li>
</ul>
</li>
<li>Set-Cookie: max-age=3600 (3600초)
<ul>
<li>0이나 음수를 지정하면 쿠키 삭제</li>
</ul>
</li>
<li>세션 쿠키(Session Cookie): 만료 날짜를 생략하면 브라우저 종료시 까지만 유지한다. 이를 <strong>세션 쿠키</strong> 라고 한다.</li>
<li>영속 쿠키(Persistence Cookie): 만료 날짜를 입력하면 해당 날짜까지 유지한다. 이를 <strong>영속 쿠키</strong> 라고 한다.</li>
</ul>
<h3 id=도메인>도메인<a hidden class=anchor aria-hidden=true href=#도메인>#</a></h3>
<blockquote>
<p><strong>Domain</strong><br>
쿠키는 도메인을 명시할 수 있다. 도메인이 설정된 쿠키는 해당 도메인에서만 유효한 쿠키가 된다.</p>
</blockquote>
<ul>
<li>set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; path=/; <strong>domain</strong>=.google.com; Secure</li>
<li>사용 방법으로는 2가지가 있다.
<ul>
<li><strong>명시하는 방법</strong>
<ul>
<li>domain=google.com를 지정해서 쿠키 생성
<ul>
<li>google.com, dev.google.com 둘 다 쿠키 접근 가능</li>
</ul>
</li>
</ul>
</li>
<li><strong>생략하는 방법</strong>
<ul>
<li>google.com에서 쿠키를 생성하고 하위 도메인에서는 생략
<ul>
<li>google.com 에서만 쿠키 접근 가능하고 dev.google.com 에서는 쿠키 접근이 불가능하다.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=경로>경로<a hidden class=anchor aria-hidden=true href=#경로>#</a></h3>
<blockquote>
<p><strong>Path</strong><br>
위에 정리해 둔 도메인외에 리소스 경로로도 필터링이 가능하다.</p>
</blockquote>
<ul>
<li>set-cookie: sessionId=abcde1234; expires=Sat, 26-Dec-2020 00:00:00 GMT; <strong>path</strong>=/; domain=.google.com; Secure</li>
<li>보통 <code>path=/</code> 루트경로로 지정한다. 일반적으로 서버개발자들은 한 도메인안에서 쿠키를 모두 전송하길 원한다.</li>
<li><code>path=/home</code> 경로를 지정하게 되면 해당 경로를 포함한 하위 경로 페이지만 쿠키 접근이 가능하다.
<ul>
<li><strong>path=/home 지정</strong>
<ul>
<li>/home -> 가능</li>
<li>/home/level1 -> 가능</li>
<li>/home/level1/level2 -> 가능</li>
<li>/hello -> 불가능</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=보안>보안<a hidden class=anchor aria-hidden=true href=#보안>#</a></h3>
<blockquote>
<p><strong>Secure, HttpOnly, SameSite</strong></p>
</blockquote>
<ul>
<li>Secure
<ul>
<li>쿠키는 http, https를 구분하지 않고 전송하는데 Secure를 적용하면 https인 경우에만 전송한다.</li>
</ul>
</li>
<li>HttpOnly
<ul>
<li>XSS(Cross-Site Scripting) 공격 방지
<ul>
<li>XSS(Cross-Site Scripting)는 웹 애플리케이션에서 일어나는 취약점으로 관리자가 아닌 권한이 없는 사용자가 웹 사이트에 스크립트를 삽입하는 공격을 방지</li>
</ul>
</li>
<li>HttpOnly를 적용하게되면 자바스크립트에서 쿠키를 접근할 수 없고 HTTP 전송에서만 사용 가능하다.</li>
</ul>
</li>
<li>SameSite <a href=/posts/network/first-party-cookie-third-party-cookie/>관련정보</a>
<ul>
<li>CSRF(교차 사이트 요청 위조) 공격을 방지하기 위해 HTTP 쿠키에서 설정할 수 있는 속성이다.</li>
<li>클라이언트의 요청 도메인과 쿠키에 설정된 도메인이 같은 경우에만 쿠키를 전송한다.</li>
</ul>
</li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://5hdumat.github.io/tags/network/>Network</a></li>
<li><a href=https://5hdumat.github.io/tags/http/>Http</a></li>
<li><a href=https://5hdumat.github.io/tags/cookie/>Cookie</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://5hdumat.github.io/posts/network/first-party-cookie-third-party-cookie/>
<span class=title>« Prev Page</span>
<br>
<span>퍼스트 파티 쿠키와 서드 파티 쿠키</span>
</a>
<a class=next href=https://5hdumat.github.io/posts/network/http-header-info/>
<span class=title>Next Page »</span>
<br>
<span>[HTTP 일반헤더] HTTP 헤더엔 무엇이 있을까?</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on twitter" href="https://twitter.com/intent/tweet/?text=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4&url=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f&hashtags=Network%2cHttp%2cCookie"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f&title=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4&summary=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4&source=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f&title=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on whatsapp" href="https://api.whatsapp.com/send?text=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4%20-%20https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share [HTTP 일반헤더] 쿠키 on telegram" href="https://telegram.me/share/url?text=%5bHTTP%20%ec%9d%bc%eb%b0%98%ed%97%a4%eb%8d%94%5d%20%ec%bf%a0%ed%82%a4&url=https%3a%2f%2f5hdumat.github.io%2fposts%2fnetwork%2fcookie%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a><script src=https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script>
<script src=https://utteranc.es/client.js repo=5hdumat/Utterance issue-term=pathname theme=github-light crossorigin=anonymous async></script>
<script></script>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
<footer class=footer>
<span>&copy; 2021 <a href=https://5hdumat.github.io>5hdumat</a></span>
<span>
Powered by
<a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer></body>
</html>